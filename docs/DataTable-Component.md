# DataTable Reutiliz√°vel

Componente de tabela reutiliz√°vel baseado no TanStack Table e shadcn/ui, projetado para ser usado em todas as opera√ß√µes CRUD do sistema ClassExchange.

## üìã Caracter√≠sticas

- ‚úÖ **Totalmente reutiliz√°vel** - Use em qualquer CRUD do sistema
- ‚úÖ **Bot√µes din√¢micos** - Criar, editar e excluir configur√°veis via props
- ‚úÖ **Busca integrada** - Campo de busca com filtro em tempo real
- ‚úÖ **Ordena√ß√£o** - Clique nos cabe√ßalhos para ordenar
- ‚úÖ **Pagina√ß√£o** - Navega√ß√£o entre p√°ginas autom√°tica
- ‚úÖ **Sele√ß√£o de colunas** - Mostrar/ocultar colunas dinamicamente
- ‚úÖ **Estados de loading** - Skeleton loading integrado
- ‚úÖ **Dialogs customizados** - Suporte a formul√°rios personalizados
- ‚úÖ **A√ß√µes customizadas** - Adicione bot√µes extras por linha
- ‚úÖ **Confirma√ß√£o de exclus√£o** - Dialog de confirma√ß√£o autom√°tico
- ‚úÖ **Responsivo** - Funciona em desktop e mobile
- ‚úÖ **Acess√≠vel** - Seguindo padr√µes WAI-ARIA

## üöÄ Uso B√°sico

```tsx
import { DataTable } from "@/components/dashboard/data-table"
import { ColumnDef } from "@tanstack/react-table"

// 1. Defina o tipo dos dados
interface Usuario {
  id: string
  nome: string
  email: string
  status: "ativo" | "inativo"
}

// 2. Configure as colunas
const columns: ColumnDef<Usuario>[] = [
  {
    accessorKey: "nome",
    header: "Nome",
  },
  {
    accessorKey: "email", 
    header: "Email",
  },
  {
    accessorKey: "status",
    header: "Status",
    cell: ({ row }) => (
      <Badge variant={row.original.status === "ativo" ? "default" : "secondary"}>
        {row.original.status}
      </Badge>
    ),
  },
]

// 3. Use o componente
function UsuariosPage() {
  const { data, isLoading } = useUsuarios()

  return (
    <DataTable
      columns={columns}
      data={data || []}
      isLoading={isLoading}
      searchKey="nome"
      searchPlaceholder="Buscar usu√°rios..."
      onAdd={() => router.push('/usuarios/novo')}
      onEdit={(usuario) => router.push(`/usuarios/editar/${usuario.id}`)}
      onDelete={handleDelete}
      addButtonLabel="Novo Usu√°rio"
    />
  )
}
```

## üìö Props Dispon√≠veis

### Props Obrigat√≥rias

| Prop | Tipo | Descri√ß√£o |
|------|------|----------|
| `columns` | `ColumnDef<TData>[]` | Defini√ß√£o das colunas da tabela |
| `data` | `TData[]` | Array de dados para exibir |

### Props de Busca e Filtros

| Prop | Tipo | Padr√£o | Descri√ß√£o |
|------|------|--------|----------|
| `searchKey` | `string` | - | Campo usado para busca (opcional) |
| `searchPlaceholder` | `string` | `"Buscar..."` | Placeholder do campo de busca |

### Props de Interface

| Prop | Tipo | Padr√£o | Descri√ß√£o |
|------|------|--------|----------|
| `showColumnVisibility` | `boolean` | `true` | Mostrar seletor de colunas |
| `showPagination` | `boolean` | `true` | Mostrar controles de pagina√ß√£o |
| `pageSize` | `number` | `10` | N√∫mero de itens por p√°gina |
| `isLoading` | `boolean` | `false` | Estado de carregamento |

### Props de A√ß√µes CRUD

| Prop | Tipo | Descri√ß√£o |
|------|------|----------|
| `onAdd` | `() => void` | Callback para criar novo item |
| `onEdit` | `(item: TData) => void` | Callback para editar item |
| `onDelete` | `(item: TData) => void` | Callback para excluir item |

### Props de Customiza√ß√£o

| Prop | Tipo | Padr√£o | Descri√ß√£o |
|------|------|--------|----------|
| `addButtonLabel` | `string` | `"Adicionar"` | Texto do bot√£o adicionar |
| `editButtonLabel` | `string` | `"Editar"` | Texto do bot√£o editar |
| `deleteButtonLabel` | `string` | `"Excluir"` | Texto do bot√£o excluir |
| `customActions` | `(item: TData) => ReactNode` | - | A√ß√µes customizadas por linha |

### Props de Dialogs

| Prop | Tipo | Descri√ß√£o |
|------|------|----------|
| `addDialog` | `ReactNode` | Dialog customizado para adicionar |
| `editDialog` | `ReactNode` | Dialog customizado para editar |

## üîß Exemplos Avan√ßados

### Com Ordena√ß√£o

```tsx
const columns: ColumnDef<Usuario>[] = [
  {
    accessorKey: "nome",
    header: ({ column }) => (
      <Button
        variant="ghost"
        onClick={() => column.toggleSorting(column.getIsSorted() === "asc")}
      >
        Nome
        <ArrowUpDown className="ml-2 h-4 w-4" />
      </Button>
    ),
  },
]
```

### Com A√ß√µes Customizadas

```tsx
const customActions = (usuario: Usuario) => (
  <>
    <Button
      variant="ghost"
      size="sm"
      onClick={() => handleViewProfile(usuario)}
    >
      <Eye className="h-4 w-4" />
    </Button>
    <Button
      variant="ghost"
      size="sm"
      onClick={() => handleSendEmail(usuario)}
    >
      <Mail className="h-4 w-4" />
    </Button>
  </>
)

<DataTable
  // outras props...
  customActions={customActions}
/>
```

### Com Dialogs Customizados

```tsx
const [showAddDialog, setShowAddDialog] = useState(false)

const addDialog = (
  <DialogContent>
    <DialogHeader>
      <DialogTitle>Novo Usu√°rio</DialogTitle>
    </DialogHeader>
    <UsuarioForm onSuccess={() => setShowAddDialog(false)} />
  </DialogContent>
)

<DataTable
  // outras props...
  addDialog={addDialog}
  onAdd={() => setShowAddDialog(true)}
/>
```

### Integra√ß√£o com React Query

```tsx
function UsuariosPage() {
  const { data, isLoading } = useQuery({
    queryKey: ['usuarios'],
    queryFn: fetchUsuarios,
  })

  const deleteMutation = useMutation({
    mutationFn: deleteUsuario,
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['usuarios'] })
      toast.success('Usu√°rio exclu√≠do com sucesso!')
    },
  })

  return (
    <DataTable
      columns={columns}
      data={data || []}
      isLoading={isLoading}
      onDelete={(usuario) => deleteMutation.mutate(usuario.id)}
      // outras props...
    />
  )
}
```

## üé® Customiza√ß√£o de Estilos

O componente usa classes do Tailwind CSS e pode ser customizado:

```tsx
// Exemplo: bot√£o de adicionar com cor customizada
<DataTable
  // outras props...
  onAdd={handleAdd}
  // O bot√£o j√° tem classes: "bg-green-600 hover:bg-green-700"
/>
```

## üîç Detec√ß√£o Autom√°tica de Nomes

O componente tenta automaticamente detectar o nome do item para o dialog de exclus√£o:

```tsx
// Busca por estas propriedades em ordem:
// 1. item.nome
// 2. item.name  
// 3. item.title
// 4. Fallback: "item"
```

## üì± Responsividade

O componente √© totalmente responsivo:

- **Desktop**: Tabela completa com todas as funcionalidades
- **Tablet**: Colunas podem ser ocultadas via seletor
- **Mobile**: Layout adaptado com scroll horizontal quando necess√°rio

## ‚ôø Acessibilidade

- Navega√ß√£o por teclado completa
- Screen readers suportados
- Contraste adequado em modo claro e escuro
- Labels descritivos em todos os bot√µes
- Estados de foco vis√≠veis

## üö® Notas Importantes

1. **TanStack Table**: Certifique-se de que `@tanstack/react-table` est√° instalado
2. **Tipos TypeScript**: Use tipos espec√≠ficos para melhor IntelliSense
3. **Performance**: Para grandes datasets, considere pagina√ß√£o server-side
4. **Mem√≥ria**: Use `React.memo` se necess√°rio para otimizar re-renders

## üìÅ Arquivos Relacionados

- `data-table.tsx` - Componente principal
- `delete-confirmation-dialog.tsx` - Dialog de confirma√ß√£o
- `data-table-example.tsx` - Exemplo de uso completo
- `README.md` - Esta documenta√ß√£o

## ü§ù Contribui√ß√£o

Para adicionar novas funcionalidades:

1. Mantenha a compatibilidade com a API atual
2. Adicione props opcionais para n√£o quebrar c√≥digo existente
3. Documente as mudan√ßas neste README
4. Teste em diferentes cen√°rios de uso